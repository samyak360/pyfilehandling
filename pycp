#!/usr/bin/env python2

import sys
import subprocess
import os

files = sys.argv

option = files[1]

if option == '-v':
	src_files = files[2:-1]
	dst_files = files[-1]
	for j in src_files:
		print j," -> ",dst_files
else:
	src_files = files[1:-1]
	dst_files = files[-1]

pwdraw = subprocess.check_output('pwd',shell=True)
pwd = pwdraw[0:-1]

#defining functions for destination directory and destination file
def destdir():
	global dst_files
	if dst_files[-1] != '/':
		dst_files = dst_files + '/'

	if '/' in dst_files[0:-1]:
		fdst = open(dst_files+i,'a')
		fdst.write(src_data)
		fdst.close()
	else:
		fdst = open(pwd+'/'+dst_files+i,'a')
		fdst.write(src_data)
		fdst.close()

def destfile():
	global dst_files
	if '/' in dst_files:
		fdst = open(dst_files,'a')
		fdst.write(src_data)
		fdst.close()
	else:
		fdst = open(pwd+'/'+dst_files,'a')
		fdst.write(src_data)
		fdst.close()

for i in src_files:
	if os.path.isdir(i):
		print "\nERROR: '"+i+"' is a directory , cannot copy a directory "
		exit()
	else:
		if os.path.exists(i) and '/' in i:
			fsrc = open(i,'r')
			src_data = fsrc.read()
			fsrc.close()
			if os.path.isdir(dst_files):
				destdir()
			else:
				destfile()

		elif os.path.exists(pwd+'/'+i):
			fsrc = open(pwd+'/'+i,'r')
			src_data = fsrc.read()
			fsrc.close()
			if os.path.isdir(dst_files):
				destdir()
			else:
				destfile()


		else:
			print "\npycp: cannot stat '"+i+"': No such file or directory"
			exit()

